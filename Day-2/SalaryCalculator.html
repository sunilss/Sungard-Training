<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Salary Calculator</title>
	<style>
		body {
			margin :0;
			padding: 0;
		}
		.container{
			margin : 10px;
			padding : 10px;
		}
		label{
			width: 50px;
			
		}
	</style>
	<script type="text/template" id="calculatorTemplate">
		
	</script>
	<script src="SalaryCalculatorModel.js"></script>
	<script>
	
	(function(){
		window.calculator = new SalaryCalculator();
		

		window.addEventListener("DOMContentLoaded",function(){
			document.getElementById("btnCalculate").addEventListener("click",calculateSalary);
			document.getElementById("txtBasic").addEventListener('change',function(){
				calculator.basic(parseFloat(this.value));
			});
			document.getElementById("txtHra").addEventListener('change',function(){
				calculator.hra(parseFloat(this.value));
			});
			document.getElementById("txtDa").addEventListener('change',function(){
				calculator.da(parseFloat(this.value));
			});
			document.getElementById("txtTax").addEventListener('change',function(){
				calculator.tax(parseFloat(this.value));
			});

			calculator.addOnModelChanged('salary',refreshSalary);
			calculator.addOnModelChanged('salary',function(){
				document.getElementById("divSalary").innerHTML = calculator.salary();
			});
			calculator.addOnModelChanged('basic',function(){
				console.log(calculator.basic());
			})
		});
		function calculateSalary(){
			
			calculator.calculate();
			document.getElementById("divSalary").innerHTML = calculator.salary();
			
		}
		function refreshSalary(){
			document.getElementById("spanResult").innerHTML = calculator.salary();
		}
	})();
	</script>
</head>
<body>
	<div class="container">
		<div><label for="txtBasic">Basic :</label><input type="text" name="txtBasic" id="txtBasic"></div>
		<div><label for="txtHra">Hra :</label><input type="text" name="txtHra" id="txtHra"></div>
		<div><label for="txtDa">Da :</label><input type="text" name="txtDa" id="txtDa"></div>
		<div><label for="txtTax">Tax :</label><input type="text" name="txtTax" id="txtTax"></div>
		<div><input type="button" value="Calculate" id="btnCalculate"></div>
		<div><span id="spanResult"></span></div>
		
	</div>
	<div></div>
	<div></div>
	<div></div>
	<div></div>
	<div></div>
	<div></div>
	<div></div>
	<div></div>
	<div></div>
	<div></div>
	<div id="divSalary"></div>
</body>
</html>